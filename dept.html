<!-- department.html -->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Create Departments</title>
  <link rel="stylesheet" href="principal.css">
  <link rel="stylesheet" href="dept.css">
</head>
<body>
  <div class="container">
    <h1>Department Management</h1>

    <div>
      <input type="text" id="deptID" placeholder="Enter Department ID" required>
      <input type="password" id="deptPassword" placeholder="Enter Department Password" required>
      <button onclick="createDepartment()">Add Department</button>
      <p id="deptMsg"></p>
    </div>

    <h2>Departments Created</h2>
    <div id="departmentGrid" class="grid"></div>
  </div>

  <script>
    function createDepartment() {
      const deptID = document.getElementById("deptID").value.trim();
      const deptPass = document.getElementById("deptPassword").value.trim();
      const deptMsg = document.getElementById("deptMsg");

      // Simulating principal login (you can replace this with real login check)
      const collegeID = sessionStorage.getItem("loggedCollegeID") || "COLL001";

      if (deptID && deptPass.length >= 4) {
        const departments = JSON.parse(localStorage.getItem("departments")) || {};
        departments[deptID] = {
          collegeID,
          password: deptPass
        };
        localStorage.setItem("departments", JSON.stringify(departments));
        deptMsg.textContent = "✅ Department added successfully!";
        deptMsg.style.color = "green";
        loadDepartmentList();
      } else {
        deptMsg.textContent = "❌ Invalid input (password must be at least 4 characters)";
        deptMsg.style.color = "red";
      }
    }

    function loadDepartmentList() {
      const collegeID = sessionStorage.getItem("loggedCollegeID") || "COLL001";
      const departments = JSON.parse(localStorage.getItem("departments")) || {};
      const grid = document.getElementById("departmentGrid");
      grid.innerHTML = "";

      for (const deptID in departments) {
        if (departments[deptID].collegeID === collegeID) {
          const div = document.createElement("div");
          div.className = "grid-item";
          div.textContent = `${deptID} - ${departments[deptID].password}`;
          grid.appendChild(div);
        }
      }
    }

    window.onload = loadDepartmentList;
  </script>
</body>
</html>
